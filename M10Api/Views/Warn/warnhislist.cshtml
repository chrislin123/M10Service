
@{
  ViewBag.Title = "warnhislist";
  Layout = "~/Views/Shared/_WarnLayout.cshtml";
}

@section Styles {

  <script src="~/Scripts/bootstrap-datepicker/bootstrap-datepicker.js"></script>
  <script src="~/Scripts/bootstrap-datepicker/bootstrap-datepicker.zh-TW.min.js"></script>
  <link rel="stylesheet" href="~/Content/bootstrap-datepicker3.min.css" />
  @*@Styles.Render("~/Content/bootstrap-datepicker3.min.css")*@
}








<div class="row">
  <div class="col-md-12">
    <h1 class="page-header">
      降雨已達崩塌警戒歷史資料一覽表 @*<small>預報時間：@ViewBag.nowdate</small>*@
    </h1>
  </div>
</div>

<form novalidate="novalidate" class="form-inline" role="form">
  <div class="row">
    <div class="panel panel-info">
      <div class="panel-heading">查詢</div>
      <div class="panel-body">
        <div class="col-md-12">
          <div class="form-group col-md-12">
            <label for="keyWord">起始時間：</label>
            <input type="date" id="StartDate" />
            <label for="keyWord">結束時間：</label>
            <input type="date" id="EndDate" />
            @*<input type="text" class="form-control" id="keyWord" ng-model="keyWord" placeholder="ex.Key1 Key2 ...">*@
            <button type="submit" class="btn btn-default" id="btnSearch" onclick="go();">查詢</button>
          </div>
        </div>
      </div>
    </div>

    <div class="panel panel-success">
      <div class="panel-heading">查詢結果 - 共 @ViewBag.count 筆</div>
      <div class="panel-body">


        <div class="col-md-12">
          <div class="row">

            <table class="table table-striped table-condensed">
              <thead>
                <tr>
                  <th style="min-width: 40px;">縣市</th>
                  <th style="min-width: 80px;">鄉鎮</th>
                  <th style="min-width: 80px;">警戒區範圍</th>
                  <th style="min-width: 80px;">1hr</th>
                  <th style="min-width: 80px;">2hr</th>
                  <th style="min-width: 80px;">3hr</th>
                  <th style="min-width: 80px;">LRTI</th>
                  <th style="min-width: 80px;">警戒LRTI</th>
                  <th style="min-width: 80px;">崩塌發布狀態</th>
                  <th style="min-width: 80px;">RT</th>
                  @*<th style="width:20px;"> </th>
                    <th style="width:20px;"> </th>*@
                </tr>
              </thead>
              <tbody>
                @foreach (var item in ViewData["LRTIAlert"] as List<dynamic>)
                {

                  <tr>
                    <td>@item.country</td>
                    <td>@item.town</td>
                    <td>@item.village</td>
                    <td>@item.HOUR1</td>
                    <td>@item.HOUR2</td>
                    <td>@item.HOUR3</td>
                    <td>@item.LRTI</td>
                    <td>@item.ELRTI</td>
                    <td>@item.status</td>
                    <td>@item.RT</td>
                    @*<td><a ng-click="editUser(user.id)" class="btn btn-small btn-primary" title="修改"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></a></td>
                      <td><a ng-click="deleteUser(user.id)" class="btn btn-small btn-danger" title="刪除"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>*@
                  </tr>
                }


              </tbody>
            </table>
            <div class="text-center">
              <uib-pagination data-total-items="totalItems" ng-model="currentPage"
                              data-max-size="NumberOfPageButtons" class=" pagination-sm"
                              data-boundary-links="true" data-rotate="false"
                              ng-change="pageChanged()" data-items-per-page="recordsPerPage"></uib-pagination>

            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
</form>


<script>
  $(document).ready(function () {
    // Send an AJAX request
    $('[type="date"]').datepicker({
      format: "yyyy-mm-dd",
      autoclose: true,
      startDate: "today",
      clearBtn: false,
      calendarWeeks: true,
      todayHighlight: true,
      language: 'zh-TW'
    });
  });

  function go() {

    //alert('test');
    //return;
    $.ajax({
      type: 'POST',
      url: '@Url.Action("warnhislistq", "warn")',
      //url: 'warn/warnhislist',
      data: { "STID": "test123456", "country": "台中" },
      dataType: 'JSON',
      success: function (response) {

        response.forEach(function (data, i) {
          //$('<li>', { text: data.STID }).appendTo($('#products'));
          //alert(data.STID);
        });


      },
      error: function (jqXHR, textStatus, errorThrown) {
        alert('error');
      },
    });


  }


</script>